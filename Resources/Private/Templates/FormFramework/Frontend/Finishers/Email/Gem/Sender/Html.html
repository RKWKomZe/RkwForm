{namespace formvh=TYPO3\CMS\Form\ViewHelpers}
{namespace rkwForm=RKW\RkwForm\ViewHelpers}

<f:layout name="Email/Html" />

<f:section name="Html">
<body>

    <p><f:translate key="tx_rkwform_formframework_form_finisher_email.salutation" extensionName="RkwForm" /> <rkwForm:getValueFromArray array='{form.formState.formValues}' value="first_name" /> <rkwForm:getValueFromArray array='{form.formState.formValues}' value="last_name" />,</p>
    <p>
        <f:if condition="<rkwForm:getFinisherOption formIdentifier='{form.formDefinition.identifier}' finisherIdentifier='EmailToSender' getOption='mailText' />">
            <f:then>
                <rkwForm:getFinisherOption formIdentifier='{form.formDefinition.identifier}' finisherIdentifier='EmailToSender' getOption='mailText' />
            </f:then>
            <f:else>
                <f:translate key="tx_rkwform_formframework_form_finisher_email_sender.new" extensionName="RkwForm" />
            </f:else>
        </f:if>
    </p>
    <br>
	<table width="600" cellpadding="0" cellspacing="0" border="0">
		<formvh:renderAllFormValues renderable="{form.formDefinition}" as="formValue">
			<tr>
				<td width="600" valign="top" align="left">{formvh:translateElementProperty(element: formValue.element, property: 'label')}</td>
				<td width="600" valign="top" align="left">
					<f:if condition="{formValue.value}">
						<f:then>
							<f:if condition="{formValue.isMultiValue}">
								<f:then>
									<table cellspacing="0" border="0">
										<f:for each="{formValue.processedValue}" as="value">
											<tr>
												<td>{value}</td>
											</tr>
										</f:for>
									</table>
								</f:then>
								<f:else>
									<table cellspacing="0" border="0">
										<tr>
                                            <td><f:format.nl2br>{formValue.processedValue}</f:format.nl2br></td>
										</tr>
									</table>
								</f:else>
							</f:if>
						</f:then>
						<f:else>
                            <f:if condition="{formValue.element.label} === 'Anrede'">
                                <f:then>
                                    <table cellspacing="0" border="0">
                                        <tr>
                                            <td><f:format.nl2br>Herr</f:format.nl2br></td>
                                        </tr>
                                    </table>
                                </f:then>
                                <f:else>
                                    -
                                </f:else>
                            </f:if>
						</f:else>
					</f:if>
				</td>
			</tr>
		</formvh:renderAllFormValues>
    </table>
    <p>
        Klicken Sie bitte auf den nachfolgenden Link, um die Anmeldung abzuschließen: <a href="{form.formstate.formValues.confirmurl}?token={form.formstate.formValues.token}">{form.formstate.formValues.confirmurl}{form.formstate.formValues.token}</a>. Bitte beachten Sie, dass dieser Link nur 24 Stunden gültig ist.<br><br>
        Ihre E-Mail-Adresse speichern wir ausschließlich zum Zwecke der GEM-Befragung und der Einladung für Events im Rahmen des GEM-Projekts.<br><br>
        Sollten Sie doch nicht teilnehmen wollen, können Sie diese E-Mail ignorieren und müssen nichts weiter unternehmen. In diesem Fall werden wir die Anmeldedaten nach 24 Stunden automatisch löschen. Beachten Sie dazu auch unsere <a href="https://www.rkw-kompetenzzentrum.de/datenschutz/">Datenschutzerklärung</a>.
    </p>
    <p>
        Informationen zur Verarbeitung Ihrer personenbezogenen Daten finden Sie in unseren <a href="https://www.rkw-kompetenzzentrum.de/datenschutz" target="_blank">Datenschutzhinweisen</a>.
    </p>
</body>

</f:section>